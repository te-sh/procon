---
number: 449
---
クエリは先読みする.

まず, 名前は連想配列を使って番号に変換する.

各人ごとの得点表と問題ごとのAC人数をもっておき, クエリから各人の得点を更新していく. このとき途中に出てきた (得点, 提出時刻) をすべて覚えておく. (得点, 提出時刻) の組は大小関係があるので, これをソートして小さい順に番号をつける.

そして再び同じようにクエリを読んでいき, (得点, 提出時刻) を番号に変換したものを Binary Indexed Tree で管理する.

順位の問い合わせがあったときは, その人の最後の番号 (これは覚えておく) より大きい番号の人数を数える.
