---
number: '004'
problem: D
---
同じ色のマーブルは連続的に広がった方が明らかに移動回数は少ない.

緑のマーブルが区間 $$ [x, x + G - 1] $$ に広がっているとする.

このときの赤のマーブルについては, $$ -100 $$ を中心に左右対称に広げることができれば, それが最小移動回数となる. このときの赤のマーブルは区間 $$ [-100-R/2, -100+(R-1)/2] $$ に広がる. これが可能なのは, $$ x \lt -100+(R-1)/2 $$ のときである. 

そうでないときは, 緑のマーブルの左端の左側に赤のマーブルが来るように並べればそれが最小移動回数となる. このとき, 赤のマーブルは区間 $$ [x-R, x-1] $$ に広がる.

青のマーブルについても赤のマーブルと同様に考える.

移動回数の計算は場合分けをする. たとえば緑のマーブルを区間 $$ [x, x+G-1] $$ に広げる場合は以下のとおりになる.

* $$ x+G-1 \lt 0 $$ ならば移動回数は $$ -(x+G-1)G+G(G-1)/2 $$ である.
* $$ x \gt 0 $$ ならば移動回数は $$ xG+G(G-1)/2 $$ である.
* そうでないならば移動回数は $$ -x(-x+1)/2+(x+G-1)(x+G)/2 $$ である.

いずれも $$ \sum_{k=1}^n k=n(n+1)/2 $$ からすぐに求まる.

$$ x $$ の範囲であるが, 最小は緑のマーブルの右端が $$ 0 $$ の場合と青のマーブルの右端が $$ 100 $$ の場合とでより左側に広がる場合である. すなわち, $$ \min(-G+1, 100-R-B+1) $$ となる. 最大も同様に $$ \max(G-1, -100+R+G-1)-G+1 $$ となる.
