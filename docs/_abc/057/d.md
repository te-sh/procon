---
number: '057'
problem: D
---
$$ v_i $$ は降順にソートする.

平均値であるが, これは最初から $$ A $$ 個取ったときが最も大きい. $$ A+1 $$ 個取ると平均値は下がるか変わらないかのどちらかになるためである.

次に組み合わせの数を考える.

まず最初から何個取るかを考えると, $$ v_1 \neq v_A $$ の場合は $$ A+1 $$ 個取ると平均値は下がるので, $$ A $$ 個取る場合のみである. このとき,　$$ v_{A-i} \dots v_{A+j} $$ がすべて $$ v_A $$ に等しいとすると, 最後の $$ i+1 $$ 個は $$ i+j+1 $$ 個の中から選べるので, $$ {}_{i+j+1}C_{i+1} $$ 通りとなる.

$$ v_1 = v_A $$ の場合は $$ A $$ 個取る場合の他に $$ A+j $$ ($$ j \leq B-A,\ v_{A+j} = v_A $$) 個取る場合も考えられる. この $$ j $$ ごとに上記と同様に組み合わせの数を計算して合計したものが答えとなる.

なお, $$ {}_nC_r $$ はパスカルの三角形を使って計算する.
